From 84d7c27f36bb210081c1e0caf860458e27ad04ef Mon Sep 17 00:00:00 2001
From: Pranith Kumar K <pkarampu@redhat.com>
Date: Wed, 7 Oct 2015 18:39:42 +0530
Subject: [PATCH 216/224] glusterfsd: Initialize ctx, cmd_args

Backport of http://review.gluster.org/12311

Change-Id: I9c71ae264665b7bba609c7f86cf42a52a6b47260
BUG: 1294487
Signed-off-by: Pranith Kumar K <pkarampu@redhat.com>
Reviewed-on: http://review.gluster.org/12311
Tested-by: NetBSD Build System <jenkins@build.gluster.org>
Reviewed-by: Jeff Darcy <jdarcy@redhat.com>
Reviewed-on: https://code.engineering.redhat.com/gerrit/64616
---
 glusterfsd/src/glusterfsd-mgmt.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/glusterfsd/src/glusterfsd-mgmt.c b/glusterfsd/src/glusterfsd-mgmt.c
index aefe4a1..c1ab934 100644
--- a/glusterfsd/src/glusterfsd-mgmt.c
+++ b/glusterfsd/src/glusterfsd-mgmt.c
@@ -2212,6 +2212,9 @@ mgmt_pmap_signin_cbk (struct rpc_req *req, struct iovec *iov, int count,
         char             brick_name[PATH_MAX] = {0,};
 
         frame = myframe;
+        ctx = glusterfsd_ctx;
+        cmd_args = &ctx->cmd_args;
+
 
         if (-1 == req->rpc_status) {
                 ret = -1;
@@ -2235,9 +2238,6 @@ mgmt_pmap_signin_cbk (struct rpc_req *req, struct iovec *iov, int count,
                 goto out;
         }
 
-        ctx = glusterfsd_ctx;
-        cmd_args = &ctx->cmd_args;
-
         if (!cmd_args->brick_port2) {
                 /* We are done with signin process */
                 emancipate_ret = 0;
-- 
1.7.1

