From 09a7493dcf0f88aa47a176ab0372289664578fb7 Mon Sep 17 00:00:00 2001
From: moagrawa <moagrawa@redhat.com>
Date: Mon, 15 Jan 2018 18:21:27 +0530
Subject: [PATCH 127/128] spec: unpackaged files found for RHEL-7 client build

Problem: unpackages files found for RHEL-7 client build

Solution: Update glusterfs.specs.in to exclude unpackage files
Label: DOWNSTREAM ONLY

BUG: 1534530
Change-Id: I761188a6a8447105b53bf3334ded963c645cab5b
Signed-off-by: moagrawa <moagrawa@redhat.com>
Reviewed-on: https://code.engineering.redhat.com/gerrit/127758
Tested-by: RHGS Build Bot <nigelb@redhat.com>
Reviewed-by: Milind Changire <mchangir@redhat.com>
Reviewed-by: Sunil Kumar Heggodu Gopala Acharya <sheggodu@redhat.com>
---
 glusterfs.spec.in | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/glusterfs.spec.in b/glusterfs.spec.in
index cb273f5..abebb28 100644
--- a/glusterfs.spec.in
+++ b/glusterfs.spec.in
@@ -1219,9 +1219,11 @@ exit 0
 %exclude %{_libdir}/pkgconfig/libgfdb.pc
 %exclude %{_sbindir}/gluster-setgfid2path
 %exclude %{_mandir}/man8/gluster-setgfid2path.8*
+%if ( 0%{?_with_systemd:1} )
 %exclude %{_datadir}/glusterfs/scripts/control-cpu-load.sh
 %exclude %{_datadir}/glusterfs/scripts/control-mem.sh
 %endif
+%endif
 
 %files api
 %exclude %{_libdir}/*.so
@@ -2181,8 +2183,8 @@ fi
 %endif
 
 %changelog
-* Tue Jan 16 2018 Mohit Agrawal <moagrawa@redhat.com>
-- Exclude control-cpu-load.sh and control-mem.sh from client builds
+* Wed Jan 17 2018 Mohit Agrawal <moagrawa@redhat.com>
+- Exclude control-cpu-load.sh and control-mem.sh for RHEL_7 client builds only (#1534530)
 
 * Wed Dec 20 2017 Milind Changire <mchangir@redhat.com>
 - Remove ExclusiveArch directive to help building on non-x86_64 arches (#1527772)
-- 
1.8.3.1

